<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>학교 알림 수신기</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="icon.png" />

  <!-- OneSignal SDK -->
  <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
  <script>
    window.OneSignalDeferred = window.OneSignalDeferred || [];
    OneSignalDeferred.push(async function (OneSignal) {
      await OneSignal.init({
        appId: "88ca455d-4461-4f3d-870c-007da6bda2c0",
        safari_web_id: "web.onesignal.auto.0a199198-d5df-41c5-963c-72a0258657aa",
        notifyButton: {
          enable: true, // 브라우저 우측 하단 구독 버튼 표시
        },
      });

      // SDK 초기화 이후 안전하게 getUserId 사용
      const userId = await OneSignal.getUserId();
      console.log("✅ OneSignal User ID:", userId);

      const isSubscribed = await OneSignal.isPushNotificationsEnabled();
      console.log("🔔 알림 구독 상태:", isSubscribed ? "구독 중" : "미구독");
    });
  </script>
</head>
<body>
  <h2>📢 학교 알림 수신기</h2>
  <p>이 앱을 홈 화면에 추가하고 알림을 허용해주세요.</p>
</body>
</html>
